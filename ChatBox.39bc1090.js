import{h as f,x as _,l as v,p as y}from"./chunks/preact.module.9df8e400.js";import{_ as b,p as g,h as x,u as C}from"./chunks/signals.module.74bea0be.js";import{s as m,a as d}from"./chunks/index.e3b0c442.cd27f200.js";var N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};const k=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w=(s,n)=>{const r=({color:u="currentColor",size:c=24,strokeWidth:o=2,children:a,...l})=>f("svg",{...N,width:String(c),height:c,stroke:u,["stroke-width"]:o,class:`lucide lucide-${k(s)}`,...l},[...n.map(([e,i])=>f(e,i)),..._(a)]);return r.displayName=`${s}`,r},$=w("Send",[["line",{x1:"22",y1:"2",x2:"11",y2:"13",key:"10auo0"}],["polygon",{points:"22 2 15 22 11 13 2 9 22 2",key:"12uapv"}]]);var B=0;function t(s,n,r,u,c){var o,a,l={};for(a in n)a=="ref"?o=n[a]:l[a]=n[a];var e={type:s,props:l,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--B,__source:c,__self:u};if(typeof s=="function"&&(o=s.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return v.vnode&&v.vnode(e),e}function S({user:s,message:n}){return t("div",{className:`${m.messageContainer} ${s==="HUMAN"?m.messageHuman:m.messageAI}`,children:t("div",{className:m.messageContent,children:t("div",{className:m.message,children:n.replace(/^\n\n/,"")})})})}const A="/assets/loader.9370e8dd.svg",I=()=>{const s=b(null),n=C(""),[r,u]=g([]),[c,o]=g(!1),a=e=>{if(e.preventDefault(),c)return;const i=[...r,{id:r?.length+1,user:"HUMAN",message:n.value}];n.value="",u(i),l(i),o(!0)},l=async e=>{await fetch("http://localhost:5000/ask-fitz",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chats:e})}).then(h=>h.json()).then(h=>{h?.result&&h?.result!==""&&u(p=>[...p,{id:p?.length+1,user:"AI",message:h?.result||""}])}).finally(()=>{o(!1)})};return x(()=>{s?.current&&(s?.current).addEventListener("DOMNodeInserted",e=>{const{currentTarget:i}=e;i?.scroll({top:i?.scrollHeight,behavior:"smooth"})})},[]),t(y,{children:t("div",{className:d.chatBox,children:[t("div",{className:d.chatBoxBody,children:[t("div",{className:d.chatBoxHeader}),t("div",{ref:s,className:d.chatBoxContent,children:[r.filter(e=>e.message.trim()&&e.message!=="").map(e=>t(S,{...e},e.id)),c?t("img",{src:A,width:30}):null]})]}),t("div",{className:d.chatBoxForm,children:t("form",{onSubmit:a,className:d.formInput,children:[t("input",{id:"input",name:"message",value:n.value,onChange:e=>n.value=e.target.value,type:"text"}),t("button",{type:"submit",className:d.buttonSend,children:t($,{size:16,color:"var(--color-main-black)"})})]})})]})})};export{I as default};
